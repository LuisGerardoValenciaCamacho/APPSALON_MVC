{"version":3,"sources":["app.js","buscador.js"],"names":["pagina","cita","id","nombre","fecha","hora","servicios","IniciarApp","MostrarServicios","MostrarSeccion","CambiarSeccion","PaginaSiguiente","PaginaAnterior","BotonesPaginado","MostrarResumen","NombreCita","FechaCita","DeshabilitarFechaAnterior","HoraCita","async","url","resultado","fetch","db","json","forEach","servicio","precio","nombreServicio","document","createElement","textContent","classList","add","precioServicio","servicioDiv","dataset","idServicio","onclick","SeleccionarServicio","appendChild","querySelector","error","console","log","Limpiar","value","e","elemento","target","tagName","parentElement","contains","remove","EliminarServicio","parseInt","AgregarServicio","firstElementChild","nextElementSibling","querySelectorAll","enlace","addEventListener","preventDefault","paso","seccionAnterior","tabAnterior","paginaSiguiente","paginaAnterior","div","firstChild","removeChild","Object","values","includes","mensaje","heading","nombreCita","innerHTML","fechaObj","Date","dia","getDate","mes","getMonth","anio","getFullYear","time","split","hour","min","formato","fechaFormateada","UTC","toLocaleDateString","weekday","year","month","day","fechaCita","horaCita","serviciosCita","titulo","cantidad","contenedorServicio","total","trim","totalPagar","botonCita","reservarCita","idServicios","map","datos","FormData","append","respuesta","method","body","Swal","fire","then","window","location","reload","icon","title","text","filter","MostrarAlerta","alerta","setTimeout","evento","getUTCDay","fechaDeshabilitar","horas","iniciarApp","path","pathname","buscarPorFecha","bloquearNavegacion","fechaSeleccionada","citas","crear"],"mappings":"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","file":"bundle.js","sourcesContent":["let pagina = 1;\r\n\r\nconst cita = {\r\n    id: \"\",\r\n    nombre: \"\",\r\n    fecha: \"\",\r\n    hora: \"\",\r\n    servicios: [],\r\n};\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function() {\r\n    Limpiar();\r\n    IniciarApp();\r\n});\r\n\r\nfunction IniciarApp() {\r\n    MostrarServicios();\r\n    // Resalta el div actual\r\n    MostrarSeccion();\r\n\r\n    // Oculata el div\r\n    CambiarSeccion();\r\n\r\n    // Paginacion siguiente y anterior\r\n    PaginaSiguiente();\r\n\r\n    PaginaAnterior();\r\n\r\n    // Mostrar botones de siguiente y anterior\r\n    BotonesPaginado();\r\n\r\n    // Mostrar resumen o mensaje de error\r\n    MostrarResumen();\r\n\r\n    // Formulario\r\n    NombreCita();\r\n\r\n    FechaCita();\r\n    DeshabilitarFechaAnterior();\r\n\r\n    HoraCita();\r\n}\r\n\r\nasync function MostrarServicios() {\r\n    try {\r\n        const url = \"http://localhost:3000/api/servicios\";\r\n        const resultado = await fetch(url);\r\n        const db = await resultado.json();\r\n        const { servicios } = db;\r\n        servicios.forEach(servicio => {\r\n            const { id, nombre, precio } = servicio;\r\n            //Dom Scripting\r\n            // Generando nombre\r\n            const nombreServicio = document.createElement(\"P\");\r\n            nombreServicio.textContent = nombre;\r\n            nombreServicio.classList.add(\"nombre-servicio\");\r\n\r\n            //Generando precio\r\n            const precioServicio = document.createElement(\"P\");\r\n            precioServicio.textContent = `$ ${precio}`;\r\n            precioServicio.classList.add(\"precio-servicio\");\r\n\r\n            //Generando div contenedor de servicio\r\n            const servicioDiv = document.createElement(\"DIV\");\r\n            servicioDiv.classList.add(\"servicio\");\r\n            servicioDiv.dataset.idServicio = id;\r\n\r\n            // Seleccionar un servicio\r\n            servicioDiv.onclick = SeleccionarServicio;\r\n\r\n            // Inyectar el precio y nombre al div de servicios\r\n            servicioDiv.appendChild(nombreServicio);\r\n            servicioDiv.appendChild(precioServicio);\r\n\r\n            // Inyectar en el HTML\r\n            document.querySelector(\"#servicios\").appendChild(servicioDiv);\r\n        });\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n}\r\n\r\nfunction Limpiar() {\r\n    document.querySelector(\"#nombre\").value = \"\";\r\n    document.querySelector(\"#fecha\").value = \"\";\r\n    document.querySelector(\"#hora\").value = \"\";\r\n}\r\n\r\nfunction SeleccionarServicio(e) {\r\n    let elemento;\r\n    if (e.target.tagName == \"P\") {\r\n        elemento = e.target.parentElement;\r\n    } else {\r\n        elemento = e.target;\r\n    }\r\n    if (elemento.classList.contains(\"seleccionado\")) {\r\n        elemento.classList.remove(\"seleccionado\");\r\n        const id = parseInt(elemento.dataset.idServicio);\r\n        EliminarServicio(id);\r\n    } else {\r\n        elemento.classList.add(\"seleccionado\");\r\n        const servicio = {\r\n            id: parseInt(elemento.dataset.idServicio),\r\n            nombre: elemento.firstElementChild.textContent,\r\n            precio: elemento.firstElementChild.nextElementSibling.textContent,\r\n        }\r\n        AgregarServicio(servicio);\r\n    }\r\n}\r\n\r\nfunction CambiarSeccion() {\r\n    const enlaces = document.querySelectorAll(\".tabs button\");\r\n    enlaces.forEach((enlace) => {\r\n        enlace.addEventListener(\"click\", (e) => {\r\n            e.preventDefault();\r\n            pagina = parseInt(e.target.dataset.paso);\r\n\r\n            MostrarSeccion();\r\n\r\n            BotonesPaginado();\r\n        })\r\n    })\r\n}\r\n\r\nfunction MostrarSeccion() {\r\n    // Eliminar mostrar-seccion\r\n    const seccionAnterior = document.querySelector(\".mostrar-seccion\");\r\n    if (seccionAnterior) {\r\n        seccionAnterior.classList.remove(\"mostrar-seccion\");\r\n    }\r\n\r\n    const seccionActual = document.querySelector(`#paso-${pagina}`);\r\n    seccionActual.classList.add(\"mostrar-seccion\");\r\n\r\n    // Eliminar actual\r\n    const tabAnterior = document.querySelector(\".tabs .actual\");\r\n    if (tabAnterior) {\r\n        tabAnterior.classList.remove(\"actual\");\r\n    }\r\n\r\n    //Resaltando el tab\r\n    const tab = document.querySelector(`[data-paso=\"${pagina}\"]`);\r\n    tab.classList.add(\"actual\");\r\n}\r\n\r\nfunction PaginaSiguiente() {\r\n    const paginaSiguiente = document.querySelector(\"#siguiente\");\r\n    paginaSiguiente.addEventListener(\"click\", () => {\r\n        pagina++;\r\n        BotonesPaginado();\r\n    })\r\n}\r\n\r\nfunction PaginaAnterior() {\r\n    const paginaAnterior = document.querySelector(\"#anterior\");\r\n    paginaAnterior.addEventListener(\"click\", () => {\r\n        pagina--;\r\n        BotonesPaginado();\r\n    })\r\n}\r\n\r\nfunction BotonesPaginado() {\r\n    const paginaSiguiente = document.querySelector(\"#siguiente\");\r\n    const paginaAnterior = document.querySelector(\"#anterior\");\r\n    if (pagina == 1) {\r\n        paginaAnterior.classList.add(\"ocultar\");\r\n        paginaSiguiente.classList.remove(\"ocultar\");\r\n    } else if (pagina == 2) {\r\n        paginaAnterior.classList.remove(\"ocultar\");\r\n        paginaSiguiente.classList.remove(\"ocultar\");\r\n    } else if (pagina == 3) {\r\n        paginaSiguiente.classList.add(\"ocultar\");\r\n        paginaAnterior.classList.remove(\"ocultar\");\r\n        Limpiar();\r\n        MostrarResumen();\r\n    }\r\n    MostrarSeccion();\r\n}\r\n\r\nfunction MostrarResumen() {\r\n    const { nombre, fecha, hora, servicios } = cita;\r\n    document.querySelector(\"#hora\").value = cita.hora;\r\n    document.querySelector(\"#fecha\").value = cita.fecha;\r\n    document.querySelector(\"#nombre\").value = cita.nombre;\r\n    const div = document.querySelector(\".contenido-resumen\");\r\n\r\n    // Limpiando HTML\r\n    while (div.firstChild) {\r\n        div.removeChild(div.firstChild);\r\n    }\r\n\r\n    // Validacion\r\n    if (Object.values(cita).includes(\"\")) {\r\n        const mensaje = document.createElement(\"P\");\r\n        mensaje.textContent = \"Falta nombre, fecha, hora o datos de los servicios\";\r\n        mensaje.classList.add(\"mostrar-mensaje\");\r\n        div.appendChild(mensaje);\r\n        return;\r\n    }\r\n    const heading = document.createElement(\"H2\")\r\n    heading.textContent = \"Resumen\";\r\n    div.appendChild(heading);\r\n\r\n    const nombreCita = document.createElement(\"P\");\r\n    nombreCita.innerHTML = `<span>Nombre:</span> ${nombre}`;\r\n\r\n    const fechaObj = new Date(fecha);\r\n    const dia = fechaObj.getDate() + 2;\r\n    const mes = fechaObj.getMonth();\r\n    const anio = fechaObj.getFullYear();\r\n    const time = hora.split(\":\");\r\n    const hour = (time[0] > 12) ? time[0] - 12 : time[0];\r\n    const min = time[1];\r\n    const formato = time[0] > 12 ? \"PM\" : \"AM\";\r\n\r\n    const fechaUTC = new Date(Date.UTC(anio, mes, dia));\r\n    const opciones = {weekday: \"long\", year: \"numeric\", month: \"long\", day: \"numeric\"};\r\n    const fechaFormateada = fechaUTC.toLocaleDateString(\"es-MX\", opciones);\r\n\r\n    const fechaCita = document.createElement(\"P\");\r\n    fechaCita.innerHTML = `<span>Fecha:</span> ${fechaFormateada}`;\r\n\r\n    const horaCita = document.createElement(\"P\");\r\n    horaCita.innerHTML = `<span>Hora:</span> ${hour}:${min} ${formato}`;\r\n\r\n    div.appendChild(nombreCita);\r\n    div.appendChild(fechaCita);\r\n    div.appendChild(horaCita);\r\n\r\n    const serviciosCita = document.createElement(\"DIV\");\r\n    serviciosCita.classList.add(\"resumen-servicios\");\r\n\r\n    const titulo = document.createElement(\"H3\");\r\n    titulo.textContent = \"Resumen de Servicios\";\r\n    serviciosCita.appendChild(titulo);\r\n\r\n    let cantidad = 0;\r\n\r\n    servicios.forEach(servicio => {\r\n        const contenedorServicio = document.createElement(\"DIV\");\r\n        contenedorServicio.classList.add(\"contenedor-servicio\");\r\n\r\n        const nombreServicio = document.createElement(\"P\");\r\n        nombreServicio.textContent = servicio.nombre;\r\n\r\n        const precioServicio = document.createElement(\"P\")\r\n        precioServicio.textContent = servicio.precio;\r\n        precioServicio.classList.add(\"precio\");\r\n\r\n        const total = servicio.precio.split(\"$\");\r\n        cantidad += parseInt(total[1].trim());\r\n        //console.log(cantidad);\r\n\r\n        contenedorServicio.appendChild(nombreServicio);\r\n        contenedorServicio.appendChild(precioServicio);\r\n\r\n        serviciosCita.appendChild(contenedorServicio);\r\n    })\r\n    div.appendChild(serviciosCita);\r\n    const totalPagar = document.createElement(\"P\");\r\n    totalPagar.innerHTML = `<span>Total a pagar:</span> ${cantidad}`;\r\n    totalPagar.classList.add(\"total\");\r\n    div.appendChild(totalPagar);\r\n\r\n    const botonCita = document.createElement(\"BUTTON\");\r\n    botonCita.textContent = \"Agendar Cita\";\r\n    botonCita.classList.add(\"boton-block-derecha\");\r\n    botonCita.onclick = reservarCita;\r\n    div.appendChild(botonCita);\r\n}\r\n\r\nasync function reservarCita() {\r\n    const idServicios = cita.servicios.map(servicio => servicio.id)\r\n    const datos = new FormData();\r\n    datos.append(\"id_usuario\", cita.id);\r\n    datos.append(\"fecha\", cita.fecha);\r\n    datos.append(\"hora\", cita.hora);\r\n    datos.append(\"servicios\", idServicios);\r\n    try {\r\n        const url = \"http://localhost:3000/api/citas\";\r\n        const respuesta = await fetch(url, {\r\n            method: \"POST\",\r\n            body: datos\r\n        });\r\n        const resultado = await respuesta.json();\r\n        if(resultado.resultado) {\r\n            Swal.fire(\r\n                'Cita Creada',\r\n                'Su cita fue creada exitosamente',\r\n                'success'\r\n              ).then(() => {\r\n                window.location.reload();\r\n              })\r\n        }\r\n    } catch(error) {\r\n        Swal.fire({\r\n            icon: 'error',\r\n            title: 'Oops...',\r\n            text: 'Error al crear su cita'\r\n          })\r\n    }\r\n}\r\n\r\nfunction AgregarServicio(servicio) {\r\n    const { servicios } = cita;\r\n    cita.servicios = [...servicios, servicio];\r\n}\r\n\r\nfunction EliminarServicio(id) {\r\n    const { servicios } = cita;\r\n    cita.servicios = servicios.filter(servicio => servicio.id !== id);\r\n}\r\n\r\nfunction NombreCita() {\r\n    const nombre = document.querySelector(\"#nombre\");\r\n    cita.nombre = document.querySelector(\"#usuario\").textContent;\r\n    cita.id = document.querySelector(\"#id\").value;\r\n    nombre.value = cita.nombre;\r\n    nombre.classList.add(\"disable\");\r\n}\r\n\r\nfunction MostrarAlerta(mensaje, error) {\r\n    // Si ya hay alerta\r\n    const alertaPrevia = document.querySelector(\".alerta\");\r\n    if (alertaPrevia) {\r\n        return;\r\n    }\r\n\r\n    const alerta = document.createElement(\"DIV\");\r\n    alerta.textContent = mensaje;\r\n    alerta.classList.add(\"alerta\");\r\n    if (error) {\r\n        alerta.classList.add(\"error\");\r\n    }\r\n\r\n    // Insertar en HTML\r\n    const formulario = document.querySelector(\".formulario\");\r\n    formulario.appendChild(alerta);\r\n\r\n    // Eliminar la alerta\r\n    setTimeout(() => {\r\n        alerta.remove();\r\n    }, 3000);\r\n}\r\n\r\nfunction FechaCita() {\r\n    const fecha = document.querySelector(\"#fecha\");\r\n    fecha.addEventListener(\"input\", (evento) => {\r\n        const dia = new Date(evento.target.value).getUTCDay();\r\n        if ([0].includes(dia)) {\r\n            evento.preventDefault();\r\n            fecha.value = \"\";\r\n            MostrarAlerta(\"Domingo no permitido\", true);\r\n        } else {\r\n            cita.fecha = fecha.value;\r\n        }\r\n    })\r\n}\r\n\r\nfunction DeshabilitarFechaAnterior() {\r\n    const fecha = document.querySelector(\"#fecha\");\r\n    const anio = new Date().getFullYear();\r\n    let mes = new Date().getMonth() + 1;\r\n    if (mes < 10) {\r\n        mes = `0${mes}`;\r\n    }\r\n    const dia = new Date().getDate() + 1;\r\n\r\n    const fechaDeshabilitar = `${anio}-${mes}-${dia}`;\r\n    fecha.min = fechaDeshabilitar;\r\n}\r\n\r\nfunction HoraCita() {\r\n    const hora = document.querySelector(\"#hora\");\r\n    hora.addEventListener(\"input\", (evento) => {\r\n        const horaCita = evento.target.value;\r\n        const horas = horaCita.split(\":\");\r\n        if (horas[0] < 10 || horas[0] > 18) {\r\n            MostrarAlerta(\"Horas no validas\", true);\r\n            setTimeout(() => {\r\n                hora.value = \"\";\r\n            }, 3000);\r\n        } else {\r\n            cita.hora = horaCita;\r\n        }\r\n    })\r\n}","document.addEventListener(\"DOMContentLoaded\", function() {\r\n    iniciarApp();\r\n});\r\n\r\nfunction iniciarApp() {\r\n    path = window.location.pathname;\r\n    if(path == \"/admin\") {\r\n        buscarPorFecha();\r\n        bloquearNavegacion();\r\n    }\r\n    \r\n    bloquearNavegacion();\r\n}\r\n\r\nfunction buscarPorFecha() {\r\n    const fecha = document.querySelector(\"#fechaAdmin\");\r\n    fecha.addEventListener(\"input\", (evento) => {\r\n        const fechaSeleccionada = evento.target.value;\r\n        window.location = `?fecha=${fechaSeleccionada}`;\r\n    })\r\n}\r\n\r\nfunction bloquearNavegacion() {\r\n    path = window.location.pathname;\r\n    console.log(path);\r\n    const citas = document.querySelector(\"#verCitas\");\r\n    const servicios = document.querySelector(\"#verServicios\");\r\n    const crear = document.querySelector(\"#newServicio\");\r\n    if(path == \"/admin\") {\r\n        citas.classList.add(\"actual\");\r\n        servicios.classList.remove(\"actual\");\r\n        crear.classList.remove(\"actual\");\r\n    } else if(path == \"/servicios\") {\r\n        servicios.classList.add(\"actual\");\r\n        citas.classList.remove(\"actual\");\r\n        crear.classList.remove(\"actual\");\r\n    } else if(path == \"/servicios/crear\") {\r\n        citas.classList.remove(\"actual\");\r\n        servicios.classList.remove(\"actual\");\r\n        crear.classList.add(\"actual\");\r\n    } else if(path == \"/servicios/actualizar\") {\r\n        citas.classList.remove(\"actual\");\r\n        servicios.classList.remove(\"actual\");\r\n        crear.classList.add(\"actual\");\r\n    }\r\n}"]}